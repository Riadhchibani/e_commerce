<!--<div class="float-right p-3">
  <mat-form-field appearance="fill">
    <mat-label>Statut</mat-label>
    <mat-select [(ngModel)]="selectedStatus" (selectionChange)="changeStatus()">
      <mat-option value=""></mat-option>
      <mat-option value="Valider">Valide</mat-option>
      <mat-option value="En attente">En attente</mat-option>
      <mat-option value="Refuse">Refusé</mat-option>
    </mat-select>
  </mat-form-field>
</div>
 <div class="container">
  <div class="row">
    <div class="col" *ngFor="let data of dataPurchase | paginate:{ itemsPerPage: 8, currentPage: p }">
      <div class="card-style">
        <div class="card" style="width: 25rem;">
          <img class="card-img-top" src="../../../assets/img/bonCommand.png" alt="Card image cap">
          <div class="card-body">
            <h5 class="card-title">{{data.reference}}</h5>
            <p class="card-text">{{data.products[0].shortLabel}}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> -->
<div class="d-flex flex-column">
  <div class="p-2">
    <div class="float-right p-3">
      <mat-form-field appearance="fill">
        <mat-label>Statut</mat-label>
        <mat-select [(ngModel)]="selectedStatus" (selectionChange)="changeStatus()">
          <mat-option value=""></mat-option>
          <mat-option value="Valide">Valide</mat-option>
          <mat-option value="En attente">En attente</mat-option>
          <mat-option value="Annuler">Annuler</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>
  <div class="p-2">
    <div class="mat-elevation-z8 p-5">
      <table mat-table [dataSource]="dataPurchase" class="w-100">

        <!-- Position Column -->
        <ng-container matColumnDef="reference">
          <th mat-header-cell *matHeaderCellDef> Réference</th>
          <td mat-cell *matCellDef="let element"> {{element.reference}} </td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="nom">
          <th mat-header-cell *matHeaderCellDef> Nom </th>
          <td mat-cell *matCellDef="let element"> {{element.consumer.lastName }} </td>
        </ng-container>

        <!-- Weight Column -->
        <ng-container matColumnDef="prenom">
          <th mat-header-cell *matHeaderCellDef> Prénom </th>
          <td mat-cell *matCellDef="let element"> {{element.consumer.firstName }} </td>
        </ng-container>

        <!-- Symbol Column -->
        <ng-container matColumnDef="produit">
          <th mat-header-cell *matHeaderCellDef> Produit </th>
          <td mat-cell *matCellDef="let element"> {{element.products[0].shortLabel}} </td>
        </ng-container>

        <ng-container matColumnDef="dateCreation">
          <th mat-header-cell *matHeaderCellDef> Date de création </th>
          <td mat-cell *matCellDef="let element"> {{element.dateCreation | date: 'dd/MM/yyyy hh:mm:ss'}} </td>
        </ng-container>

        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef> Statut </th>
          <td mat-cell *matCellDef="let element"> {{element.status}} </td>
        </ng-container>

        <ng-container matColumnDef="raison">
          <th mat-header-cell *matHeaderCellDef> Raison </th>
          <td mat-cell *matCellDef="let element">
            <mat-icon *ngIf="element.status == 'Annuler'" (click)="openModal()">comment </mat-icon>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>
  </div>
  <div class="p-2">
    <pagination-controls (pageChange)="p = $event" class="float-right"></pagination-controls>
  </div>
</div>

<div class="modal" tabindex="-1" role="dialog" [ngStyle]="{'display':display}">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Description</h4>
        <button type="button" class="close" aria-label="Close" (click)="onCloseHandled()"><span aria-hidden="true">&times;</span></button>
      </div>
      <div class="modal-body">
        <p>Commande annulée</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" (click)="onCloseHandled()">Fermer</button>
      </div>
    </div>
  </div>
</div>